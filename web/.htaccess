#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|install|make|module|profile|po|sh|.*sql|theme|twig|tpl(\.php)?|xtmpl|yml)(~|\.sw[op]|\.bak|\.orig|\.save)?$|^(\.(?!well-known).*|Entries.*|Repository|Root|Tag|Template|composer\.(json|lock)|web\.config|yarn\.lock|package\.json)$|^#.*#$|\.php(~|\.sw[op]|\.bak|\.orig|\.save)$">
  <IfModule mod_authz_core.c>
    Require all denied
  </IfModule>
  <IfModule !mod_authz_core.c>
    Order allow,deny
  </IfModule>
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Add correct encoding for SVGZ.
AddType image/svg+xml svg svgz
AddEncoding gzip svgz

# Most of the following PHP settings cannot be changed at runtime. See
# sites/default/default.settings.php and
# Drupal\Core\DrupalKernel::bootEnvironment() for settings that can be
# changed at runtime.
<IfModule mod_php.c>
  php_value session.save_path               /var/www/unl.edu/tmp/
  php_value assert.active                   0
  php_value post_max_size                   256M
  php_value upload_max_filesize             256M
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files and redirects for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Set a fallback resource if mod_rewrite is not enabled. This allows Drupal to
# work without clean URLs. This requires Apache version >= 2.2.16. If Drupal is
# not accessed by the top level URL (i.e.: http://example.com/drupal/ instead of
# http://example.com/), the path to index.php will need to be adjusted.
<IfModule !mod_rewrite.c>
  FallbackResource /index.php
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Enforce HTTPS.
  RewriteCond %{HTTPS} off
  RewriteCond %{HTTP:X-Forwarded-Proto} !https
  RewriteCond %{REQUEST_URI} "!^/status.php"
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # Set "protossl" to "s" if we were accessed via https://.  This is used later
  # if you enable "www." stripping or enforcement, in order to ensure that
  # you don't bounce between http and https.
  RewriteRule ^ - [E=protossl]
  RewriteCond %{HTTPS} on
  RewriteRule ^ - [E=protossl:s]

  # Make sure Authorization HTTP header is available to PHP
  # even when running as CGI or FastCGI.
  RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

  # START unl_multisite SECTION
  # Add the following line to your httpd.conf where <DRUPAL_ROOT> is the file system path to the Drupal web root.
  # RewriteMap drupal_unl_multisite txt:<DRUPAL_ROOT>/.htaccess-subsite-map.txt
  # Do not uncomment the previous line.
  RewriteRule .*/cron.php cron.php
  RewriteRule .*/update.php update.php
  RewriteRule ^(.*?/(core\/assets|core\/misc|core\/modules|core\/themes|libraries|modules|sites|themes))(.*) ${drupal_unl_multisite:$1|$1}$3 [DPI]

  RewriteCond ${drupal_unl_multisite://%{HTTP_HOST}%{REQUEST_URI}|NOT_FOUND} !^NOT_FOUND$
  RewriteRule (.*) ${drupal_unl_multisite://%{HTTP_HOST}%{REQUEST_URI}|$1} [R,L]
  # END unl_multisite SECTION

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "/\.|^\.(?!well-known/)" - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/foo will be redirected to http://www.example.com/foo)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} .
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http%{ENV:protossl}://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/foo will be redirected to http://example.com/foo)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http%{ENV:protossl}://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  RewriteBase /

  # Add a trailing slash. This is mostly accomplished with the Redirect module,
  # however this is needed for the root of a multisite site on the default
  # domain such as https://cms.unl.edu/examplesite -> https://cms.unl.edu/examplesite/
  RewriteCond %{REQUEST_METHOD} !=post [NC]
  RewriteRule ^(.*(?:^|/)[^/\.]+)$ https://%{HTTP_HOST}%{REQUEST_URI}/ [L,R=301]

  # Redirect common PHP files to their new locations.
  RewriteCond %{REQUEST_URI} ^(.*)?/(install\.php) [OR]
  RewriteCond %{REQUEST_URI} ^(.*)?/(rebuild\.php)
  RewriteCond %{REQUEST_URI} !core
  RewriteRule ^ %1/core/%2 [L,QSA,R=301]

  # Rewrite install.php during installation to see if mod_rewrite is working
  RewriteRule ^core/install\.php core/install.php?rewrite=ok [QSA,L]

  # Pass all requests not referring directly to files in the filesystem to
  # index.php.
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # For security reasons, deny access to other PHP files on public sites.
  # Note: The following URI conditions are not anchored at the start (^),
  # because Drupal may be located in a subdirectory. To further improve
  # security, you can replace '!/' with '!^/'.
  # Allow access to PHP files in /core (like authorize.php or install.php):
  RewriteCond %{REQUEST_URI} !/core/[^/]*\.php$
  # Allow access to test-specific PHP files:
  RewriteCond %{REQUEST_URI} !/core/modules/system/tests/https?\.php
  # Allow access to Statistics module's custom front controller.
  # Copy and adapt this rule to directly execute PHP files in contributed or
  # custom modules or to run another PHP application in the same directory.
  RewriteCond %{REQUEST_URI} !/core/modules/statistics/statistics\.php$
  # Deny access to any other PHP files that do not match the rules above.
  # Specifically, disallow autoload.php from being served directly.
  RewriteRule "^(.+/.*|autoload)\.php($|/)" - [F]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*css_[a-zA-Z0-9-_]+)\.css$ $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*js_[a-zA-Z0-9-_]+)\.js$ $1\.js\.gz [QSA]

    # Serve correct content types, and prevent double compression.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1,E=no-brotli:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1,E=no-brotli:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule>

# Various header fixes.
<IfModule mod_headers.c>
  # Disable content sniffing, since it's an attack vector.
  Header always set X-Content-Type-Options nosniff
  # Disable Proxy header, since it's an attack vector.
  RequestHeader unset Proxy
</IfModule>

# Various UNL specific redirects.
# **** IMPORTANT NOTE FOR PRODUCTION: **************************
#   Anything added here needs committed to patches/custom-htaccess.append.txt
#     or it will be overwritten by the next execution of composer install.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # dlc
  RewriteCond %{HTTP_HOST} ^dlc\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^examservices\.unl\.edu$
  RewriteRule ^(.*)$ https://its.unl.edu/dlc [R=301,L]

  # huskertech (old paths from when it was part of the ITS site)
  RewriteCond %{HTTP_HOST} ^its\.unl\.edu$
  RewriteRule ^huskertech(.*)$ https://huskertech.unl.edu/ [R=301,L]

  # my
  RewriteCond %{HTTP_HOST} ^my\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^myplan\.unl\.edu$
  RewriteRule ^(.*)$ https://its.unl.edu/service-portal/myunl/ [R=301,L]

  # phishing
  RewriteCond %{HTTP_HOST} ^phishing\.unl\.edu$
  RewriteRule ^(.*)$ https://its.unl.edu/departments/securityunl/phishingunl/ [R=301,L]

  # physics professor sites that start with a ~
  RewriteCond %{HTTP_HOST} ^physics\.unl\.edu$
  RewriteRule ^~agruverman(.*)$ https://gruverman.unl.edu$1 [R=301,L]
  RewriteCond %{HTTP_HOST} ^physics\.unl\.edu$
  RewriteRule ^~kirillb(.*)$ https://belashchenko.unl.edu$1 [R=301,L]
  RewriteCond %{HTTP_HOST} ^physics\.unl\.edu$
  RewriteRule ^~tsymbal(.*)$ https://tsymbal.unl.edu$1 [R=301,L]
  RewriteCond %{HTTP_HOST} ^physics\.unl\.edu$
  RewriteRule ^~(.*)$ https://www.physics.unl.edu/~$1 [R=301,L]

  # sheldon
  RewriteCond %{HTTP_HOST} sheldonartmuseum\.org
  RewriteRule ^collection(.*)$ https://emp-web-95.zetcom.ch/eMP/eMuseumPlus?service=ExternalInterface&module=exhibition&viewType=detailList [R=301,L]

  # ***********************************************************
  # engineering.unl.edu

  # bse
  RewriteCond %{HTTP_HOST} ^engineering\.unl\.edu$
  RewriteRule ^bse/(.*)$ https://bse.unl.edu/$1 [R=301,L]

  # ***********************************************************
  # HLFPA arts.unl.edu

  RewriteCond %{HTTP_HOST} ^art\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.art\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/art/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^carsoncenter\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/carson-center/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^carsonschool\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/theatre-and-film/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^clayclub\.unl\.edu$
  RewriteRule ^(.*)$ https://art.unl.edu/saahd/student-organizations/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^dance\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/major/dance/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^design\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/major/graphic-design/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^film\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/theatre-and-film/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^music\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/music/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^theatre\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/theatre-and-film/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^vislit\.unl\.edu$
  RewriteRule ^(.*)$ https://arts.unl.edu/art/ [R=301,L]

  # ***********************************************************
  # Sites that were previously at www.unl.edu/*

  # asdnetwork
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^asdnetwork/(.*)$ https://asdnetwork.unl.edu/$1 [R=301,L]

  # btenhumberg
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^btenhumberg/(.*)$ https://btenhumberg.unl.edu/$1 [R=301,L]

  # chancellor
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^chancellor/(.*)$ https://chancellor.unl.edu/$1 [R=301,L]

  # classics
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^classics/(.*)$ https://classics.unl.edu/$1 [R=301,L]

  # criminal-justice
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^criminal-justice/(.*)$ https://criminaljustice.unl.edu/$1 [R=301,L]
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^criminaljustice/(.*)$ https://criminaljustice.unl.edu/$1 [R=301,L]

  # english
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^english/(.*)$ https://engl.unl.edu/$1 [R=301,L]

  # equity
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^equity/(.*)$ https://equity.unl.edu/$1 [R=301,L]

  # facultysenate
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^facultysenate/(.*)$ https://facultysenate.unl.edu/$1 [R=301,L]

  # gradstudies
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^gradstudies/(.*)$ https://graduate.unl.edu/$1 [R=301,L]

  # hillel
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^hillel/(.*)$ https://hillel.unl.edu/$1 [R=301,L]

  # hmed
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^hmed/(.*)$ https://hmed.unl.edu/$1 [R=301,L]

  # medren
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^medren/(.*)$ https://medren.unl.edu/$1 [R=301,L]

  # newp
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^newp/(.*)$ https://newp.unl.edu/$1 [R=301,L]

  # philosophy
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^philosophy/(.*)$ https://philosophy.unl.edu/$1 [R=301,L]

  # physics
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^physics/introlabs/(.*)$ https://physics.unl.edu/introductory-physics-labs/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^physics/(.*)$ https://physics.unl.edu/$1 [R=301,L]

  # plains
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^plains/(.*)$ https://plains.unl.edu/$1 [R=301,L]

  # psi
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^psi/(.*)$ https://psi.unl.edu/$1 [R=301,L]

  # ssd
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^ssd/(.*)$ https://ssd.unl.edu/$1 [R=301,L]

  # virologycenter
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^virologycenter/(.*)$ https://virology.unl.edu/$1 [R=301,L]

  # wgs
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^wgs/(.*)$ https://wgs.unl.edu/$1 [R=301,L]
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^womenssp/(.*)$ https://wgs.unl.edu/$1 [R=301,L]

  # 19thcentury
  RewriteCond %{HTTP_HOST} ^www\.unl\.edu$
  RewriteRule ^19thcentury/(.*)$ https://19thcentury.unl.edu/$1 [R=301,L]

  # ***********************************************************
  # Moved away from the CMS

  # antivirus
  RewriteCond %{HTTP_HOST} ^antivirus\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^anti-virus\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.antivirus\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.anti-virus\.unl\.edu$
  RewriteRule ^(.*)$ https://nusupport.nebraska.edu/TDClient/33/Portal/Requests/ServiceDet?ID=52 [R=301,L]

  # cocreate
  RewriteCond %{HTTP_HOST} ^cocreate\.unl\.edu$
  RewriteRule ^(.*)$ https://admissions.unl.edu/ [R=301,L]

  # ITS services
  RewriteCond %{HTTP_HOST} ^its\.unl\.edu$
  RewriteRule ^services(.*)$ https://services.unl.edu/ [R=301,L]

  # resnet
  RewriteCond %{HTTP_HOST} ^resnet\.unl\.edu$
  RewriteRule ^(.*)$ https://nusupport.nebraska.edu/TDClient/33/Portal/Requests/ServiceDet?ID=114 [R=301,L]

  # telecom
  RewriteCond %{HTTP_HOST} ^telecom\.unl\.edu$ [or]
  RewriteCond %{HTTP_HOST} ^www\.telecom\.unl\.edu$ [or]
  RewriteCond %{HTTP_HOST} ^telcom\.unl\.edu$ [or]
  RewriteCond %{HTTP_HOST} ^www\.telcom\.unl\.edu$ [or]
  RewriteCond %{HTTP_HOST} ^telecomapps\.unl\.edu$
  RewriteRule ^(.*)$ https://nusupport.nebraska.edu/TDClient/33/Portal/Requests/ServiceCatalog?CategoryID=23 [R=301,L]

  # wifi
  RewriteCond %{HTTP_HOST} ^wifi\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^wireless\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^wireless-reg\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^eduroam\.unl\.edu$
  RewriteRule ^(.*)$ https://nusupport.nebraska.edu/TDClient/33/Portal/Requests/ServiceDet?ID=105 [R=301,L]

  # ***********************************************************
  # extension

  # offices that moved to their own sites
  RewriteCond %{HTTP_HOST} ^extension\.unl\.edu$
  RewriteRule ^statewide/enreec(.*)$ https://enreec.unl.edu/$1 [R=301,L]

  RewriteCond %{HTTP_HOST} ^extension\.unl\.edu$
  RewriteRule ^statewide/douglas-sarpy(.*)$ https://douglas-sarpy.unl.edu/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^extension\.unl\.edu$
  RewriteRule ^statewide/westcentral(.*)$ https://westcentral.unl.edu/$1 [R=301,L]

  # county domains go to their group
  RewriteCond %{HTTP_HOST} ^adams\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.adams\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/adams/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^antelope\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.antelope\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/antelope/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^bkr\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.bkr\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/bkr/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^boone-nance\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.boone-nance\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^boone\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.boone\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^nance\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.nance\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/boone-nance/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^boxbutte\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.boxbutte\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/boxbutte/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^buffalo\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.buffalo\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/buffalo/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^burt\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.burt\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/burt/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^butler\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.butler\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/butler/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^cass\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.cass\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/cass/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^cedar\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.cedar\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/cedar/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^central4\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.central4\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^greeley\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.greeley\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^howard\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.howard\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^sherman\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.sherman\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^valley\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.valley\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/central4/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^centralsandhills\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.centralsandhills\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/centralsandhills/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^cherry\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.cherry\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/cherry/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^cheyenne\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.cheyenne\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/cheyenne/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^ckb\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.ckb\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^kimball-banner\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.kimball-banner\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^kimballbanner\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/kimball-banner/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^clay\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.clay\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/clay/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^colfax\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.colfax\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/colfax/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^cuming\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.cuming\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/cuming/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^custer\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.custer\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/custer/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^dakota\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dakota\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/dakota/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^dawson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dawson\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/dawson/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^deuel-garden\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.deuel-garden\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^deuel\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.deuel\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/deuel/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^gardencounty\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/garden/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^dixon\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dixon\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/dixon/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^dodge\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dodge\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/dodge/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^fillmore\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.fillmore\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/fillmore/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^franklin\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.franklin\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/franklin/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^frontier\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.frontier\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/frontier/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^furnas\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.furnas\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/furnas/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^gage\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.gage\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/gage/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^glw\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.glw\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/glw/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^hall\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.hall\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/hall/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^hamilton\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.hamilton\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/hamilton/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^harlan\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.harlan\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/harlan/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^holt-boyd\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.holt-boyd\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^holt\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.holt\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^boyd\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.boyd\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/holt-boyd/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^jefferson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.jefferson\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/jefferson/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^johnson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.johnson\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/johnson/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^kap\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.kap\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/kap/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^kearney\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.kearney\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/kearney/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^kimmel\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.kimmel\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/kimmel/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^knox\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.knox\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/knox/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^lincolnmcpherson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.lincolnmcpherson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^lincoln\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.lincoln\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^mcpherson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.mcpherson\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/lincolnmcpherson/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^madison\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.madison\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/madison/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^metro\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/metro1/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^merrick\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.merrick\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/merrick/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^nemaha\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.nemaha\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/nemaha/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^northernpanhandle\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^otoe\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.otoe\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/otoe/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^panhandle\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.panhandle\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/panhandle/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^pawnee\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.pawnee\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/pawnee/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^perkins-chase\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.perkins-chase\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^chase\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.chase\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/perkins-chase/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^phelps-gosper\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.phelps-gosper\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^phelps\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.phelps\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^gosper\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.gosper\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/phelps-gosper/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^pierce\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.pierce\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/pierce/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^platte\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.platte\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/platte/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^polk\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.polk\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/polk/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^redwillow\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.redwillow\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/redwillow/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^richardson\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.richardson\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/richardson/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^saline\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.saline\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/saline/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^saunders\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.saunders\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/saunders/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^scottsbluff-morrill\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.scottsbluff-morrill\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^scottsbluff\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.scottsbluff\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/scottsbluff-morrill/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^morrill\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.morrill\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/morrill/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^seward\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.seward\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/seward/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^dawes\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dawes\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/dawes/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^sheridan\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.sheridan\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/sheridan/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^sioux\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.sioux\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/sioux/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^southeast\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.southeast\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/southeast/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^southernplains\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.southernplains\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^nuckolls\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.nuckolls\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^thayer\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.thayer\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/southernplains/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^stanton\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.stanton\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/stanton/ [R=301,L]

  RewriteCond %{HTTP_HOST} ^sw3\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.sw3\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^sw4\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.sw4\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^dundy\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.dundy\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^hayes\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.hayes\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^hitchcock\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.hitchcock\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/sw3/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^thurston\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.thurston\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/thurston/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^washington\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.washington\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/washington/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^wayne\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.wayne\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/wayne/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^webster\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.webster\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/webster/ [R=301,L]
  RewriteCond %{HTTP_HOST} ^york\.unl\.edu$ [OR]
  RewriteCond %{HTTP_HOST} ^www\.york\.unl\.edu$
  RewriteRule ^(.*)$ https://extension.unl.edu/statewide/york/ [R=301,L]

</IfModule>
