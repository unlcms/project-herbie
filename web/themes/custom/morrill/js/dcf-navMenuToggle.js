define(["exports","./dcf-utility"],function(t,a){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==n(t)?t:t+""}(i.key),i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.DCFNavMenuToggle=void 0;t.DCFNavMenuToggle=function(){function n(e,t){var o=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.disableBodyScroll=t.disableBodyScroll,this.enableBodyScroll=t.enableBodyScroll,this.skipNav=document.getElementById("dcf-skip-nav"),this.institutionTitle=document.getElementById("dcf-institution-title"),this.logo=document.getElementById("dcf-logo-lockup"),this.nav=document.getElementById("dcf-navigation"),this.main=document.querySelector("main"),this.footer=document.getElementById("dcf-footer");var t=document.querySelectorAll(".hrjs"),t=(Array.prototype.forEach.call(t,function(t){try{new e(t,{tolerance:{up:5,down:5}}).init()}catch(t){}}),this.toggleButtons=document.querySelectorAll(".dcf-nav-toggle-btn-menu"),this.toggleIconOpen=document.getElementById("dcf-nav-toggle-icon-open-menu"),this.toggleIconClose=document.getElementById("dcf-nav-toggle-icon-close-menu"),this.toggleLabel=document.querySelector(".dcf-nav-toggle-label-menu"),this.mobileNav=document.getElementById("dcf-navigation"),this.modalParent=document.querySelector(".dcf-nav-menu"),this.mobileNavMenu=document.getElementById("dcf-nav-menu-child"),this.mobileNavMenu||(this.mobileNavMenu=document.createElement("nav"),this.mobileNavMenu.setAttribute("id","dcf-nav-menu-child")),this.tabFocusEls=this.mobileNavMenu.querySelectorAll("[href]"),this.firstTabFocusEl=this.tabFocusEls[a.DCFUtility.magicNumbers("int0")],this.lastTabFocusEl=this.tabFocusEls[this.tabFocusEls.length-a.DCFUtility.magicNumbers("int1")],this.closeSearchEvent=new CustomEvent("closeSearch"),this.closeIDMOptionsEvent=new CustomEvent("closeDropDownWidget",{detail:{type:"idm-logged-in"}}),this.activeToggleButton=null,this.isNavigationOpen=function(){return o.modalParent.classList.contains("dcf-modal-open")},this.closeOpenNavigation=function(){!0===o.isNavigationOpen()&&o.closeNavModal()},this.onKeyDown=function(t){t.keyCode===a.DCFUtility.magicNumbers("escCode")&&o.closeNavModal();"Tab"!==t.key&&9!==t.keyCode||"Tab"!==t.key&&9!==t.keyCode||(t.shiftKey?document.activeElement===o.firstTabFocusEl&&(t.preventDefault(),o.lastTabFocusEl.focus()):document.activeElement===o.lastTabFocusEl&&(t.preventDefault(),o.firstTabFocusEl.focus()))},document.addEventListener("closeNavigation",this.closeOpenNavigation,!1),window.addEventListener("resize",this.closeOpenNavigation,!1),Array.prototype.forEach.call(this.toggleButtons,function(t){t.addEventListener("click",function(t){return o.activeToggleButton=t.currentTarget,!0===o.isNavigationOpen()?o.closeNavModal():o.openNavModal(),!1},!1)}),document.querySelectorAll(".dcf-nav-menu-child>ul>li")),t=Array.from(t).find(function(t){return t.querySelector("ul")}),i=document.getElementById("dcf-menu-toggle");t&&i&&(i.removeAttribute("hidden"),i.setAttribute("aria-expanded","false"),i.setAttribute("aria-label","open menu"))}return t=n,(e=[{key:"openNavModal",value:function(){document.dispatchEvent(this.closeSearchEvent),document.dispatchEvent(this.closeIDMOptionsEvent),window.matchMedia("(max-width: 56.12em)").matches&&(this.skipNav.setAttribute("aria-hidden","true"),this.institutionTitle.setAttribute("aria-hidden","true"),this.logo.setAttribute("aria-hidden","true"),this.nav.setAttribute("aria-hidden","false"),this.main.setAttribute("aria-hidden","true"),this.footer.setAttribute("aria-hidden","true"),this.disableBodyScroll(this.mobileNavMenu)),Array.prototype.forEach.call(this.toggleButtons,function(t){t.setAttribute("aria-expanded","true"),t.setAttribute("aria-label","close menu")}),this.modalParent.classList.add("dcf-modal-open"),this.toggleIconOpen.classList.add("dcf-d-none"),this.toggleIconClose.classList.remove("dcf-d-none"),this.toggleLabel.textContent="Close",this.firstTabFocusEl.focus(),document.addEventListener("keydown",this.onKeyDown)}},{key:"closeNavModal",value:function(){window.matchMedia("(max-width: 56.12em)").matches&&(this.skipNav.setAttribute("aria-hidden","false"),this.institutionTitle.setAttribute("aria-hidden","false"),this.logo.setAttribute("aria-hidden","false"),this.nav.setAttribute("aria-hidden","true"),this.main.setAttribute("aria-hidden","false"),this.footer.setAttribute("aria-hidden","false"),this.enableBodyScroll(this.mobileNavMenu)),Array.prototype.forEach.call(this.toggleButtons,function(t){t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label","open menu")}),this.modalParent.classList.remove("dcf-modal-open"),this.toggleIconOpen.classList.remove("dcf-d-none"),this.toggleIconClose.classList.add("dcf-d-none"),this.toggleLabel.textContent="Menu",this.activeToggleButton.focus(),document.removeEventListener("keydown",this.onKeyDown)}}])&&i(t.prototype,e),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}()});
