define(["exports","./dcf-utility","./dcf-button-toggle"],function(e,s,f){function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==r(e)?e:e+""}(s.key),s)}}function t(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.DCFFieldsetCollapsibleTheme=e.DCFFieldsetCollapsible=void 0;var d=e.DCFFieldsetCollapsibleTheme=function(){return t(function e(){l(this,e),this.legendButtonClassList=["dcf-btn","dcf-btn-tertiary","dcf-d-inline-block","dcf-pt-0","dcf-pb-0","dcf-pl-1","dcf-pr-1","dcf-mr-2"],this.legendButtonInnerHTMLOn="-",this.legendButtonInnerHTMLOff="+",this.fieldsetContentsClassList=[],this.fieldsetContentsClassListOn=["dcf-h-auto"],this.fieldsetContentsClassListOff=["dcf-h-0","dcf-overflow-y-hidden","dcf-overflow-x-hidden"],this.fieldsetClassList=[],this.fieldsetClassListOn=[],this.fieldsetClassListOff=[],this.animationBlockClassList=["dcf-motion-none"]},[{key:"setThemeVariable",value:function(e,t){e in this&&r(t)==r(this[e])&&(this[e]=t)}}])}();e.DCFFieldsetCollapsible=function(){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};l(this,r),t instanceof d?this.theme=t:this.theme=new d,this.fieldsetReadyEvent=new Event(r.events("fieldsetReady")),this.commandToggle=new Event(f.DCFToggleButton.events("commandToggle")),this.toggleKeys=[],Array.isArray(n.toggleKeys)?this.toggleKeys=i(n.toggleKeys):null!=n.toggleKeys&&""!==n.toggleKeys&&this.toggleKeys.push(n.toggleKeys),this.onKeys=[],Array.isArray(n.onKeys)?this.onKeys=i(n.onKeys):null!=n.onKeys&&""!==n.onKeys&&this.onKeys.push(n.onKeys),this.offKeys=[],Array.isArray(n.offKeys)?this.offKeys=i(n.offKeys):null!=n.offKeys&&""!==n.offKeys&&this.offKeys.push(n.offKeys),this.uuid=s.DCFUtility.uuidv4(),this.fieldsets=e,NodeList.prototype.isPrototypeOf(this.fieldsets)?this.fieldsets=Array.from(this.fieldsets):Array.isArray(this.fieldsets)||(this.fieldsets=[this.fieldsets])}return t(r,[{key:"initialize",value:function(){var a=this;this.fieldsets.forEach(function(t,e){var n=t.dataset.startExpanded,s=(void 0===n&&(n="true"),t.querySelector("legend"));if(null===s)throw new Error("Missing Legend In Fieldset");var i=s.cloneNode(!0),o=(s.remove(),i.style.cursor="pointer",document.createElement("div")),r=(o.id=a.uuid.concat("-collapsible-fieldset-contents-",e),o.innerHTML=t.innerHTML,a.theme.fieldsetContentsClassList.forEach(function(e){o.classList.add(e)}),"true"===n?a.theme.fieldsetContentsClassListOn.forEach(function(e){o.classList.add(e)}):a.theme.fieldsetContentsClassListOff.forEach(function(e){o.classList.add(e)}),t.innerHTML="",t.append(i),t.append(o),a.theme.animationBlockClassList.forEach(function(e){t.classList.add(e)}),a.theme.fieldsetClassList.forEach(function(e){t.classList.add(e)}),"true"===n?a.theme.fieldsetClassListOn.forEach(function(e){t.classList.add(e)}):a.theme.fieldsetClassListOff.forEach(function(e){t.classList.add(e)}),document.createElement("button"));a.theme.legendButtonClassList.forEach(function(e){r.classList.add(e)}),r.innerHTML=a.theme.legendButtonInnerHTMLOn,r.setAttribute("type","button"),r.dataset.controls=o.id,r.dataset.labelOn="Expand Fieldset",r.dataset.labelOff="Collapse Fieldset",r.dataset.postfix=e,r.dataset.startExpanded=n,i.prepend(r),a.eventListeners(t,o,r,i);function l(){a.theme.animationBlockClassList.forEach(function(e){t.classList.remove(e)}),t.removeEventListener("transitionend",l)}new f.DCFToggleButton(r,{toggleKeys:a.toggleKeys,onKeys:a.onKeys,offKeys:a.offKeys}).initialize(),t.dispatchEvent(a.fieldsetReadyEvent),null!==t.getAttribute("hidden")&&t.removeAttribute("hidden");t.addEventListener("transitionend",l)})}},{key:"eventListeners",value:function(t,n,s,i){var o=this;i.addEventListener("click",function(e){!i.contains(e.target)||s.isEqualNode(e.target)||s.contains(e.target)||s.dispatchEvent(o.commandToggle)}),n.addEventListener(r.events("toggleElementOn"),function(){o.theme.fieldsetContentsClassListOff.forEach(function(e){n.classList.remove(e)}),o.theme.fieldsetContentsClassListOn.forEach(function(e){n.classList.add(e)}),o.theme.fieldsetClassListOff.forEach(function(e){t.classList.remove(e)}),o.theme.fieldsetClassListOn.forEach(function(e){t.classList.add(e)})}),n.addEventListener(r.events("toggleElementOff"),function(){o.theme.fieldsetContentsClassListOn.forEach(function(e){n.classList.remove(e)}),o.theme.fieldsetContentsClassListOff.forEach(function(e){n.classList.add(e)}),o.theme.fieldsetClassListOn.forEach(function(e){t.classList.remove(e)}),o.theme.fieldsetClassListOff.forEach(function(e){t.classList.add(e)})}),s.addEventListener(r.events("toggleButtonOn"),function(){s.innerHTML=o.theme.legendButtonInnerHTMLOn}),s.addEventListener(r.events("toggleButtonOff"),function(){s.innerHTML=o.theme.legendButtonInnerHTMLOff})}}],[{key:"events",value:function(e){var t={fieldsetReady:"ready"};return Object.freeze(t),void 0!==f.DCFToggleButton.events(e)?f.DCFToggleButton.events(e):e in t?t[e]:void 0}}])}()});