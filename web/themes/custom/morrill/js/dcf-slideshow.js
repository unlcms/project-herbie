define(["exports","./dcf-utility","./dcf-figcaption-toggle"],function(t,l,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var i;if(t)return"string"==typeof t?r(t,e):"Map"===(i="Object"===(i={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=a(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==a(t)?t:t+""}(s.key),s)}}function e(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.DCFSlideshowTheme=t.DCFSlideshow=void 0;var d=function(){return e(function t(e,i,s){var n=this;c(this,t),this.slideshow=e,this.slideshowIndex=i,this.source=s,this.theme=this.source.theme,this.scrollInterval=null,this.scrollRate=3e3,this.slideshow.dataset.rate&&(this.scrollRate=this.slideshow.dataset.rate),this.paused=!0,this.userPaused=!0,this.paused=!0,this.slideDeck=this.slideshow.querySelector("ul"),this.uuid=l.DCFUtility.uuidv4(),this.slideTransition=this.slideshow.dataset.transition,this.slideTransition=null,this.slideshowName="Slideshow ".concat(this.slideshowIndex),this.slideAriaLabel=this.slideshow.getAttribute("aria-label"),this.slideAriaLabel&&(this.slideshowName=this.slideAriaLabel),this.slideshow.setAttribute("id",this.uuid.concat("-slideshow")),this.slideDeck.setAttribute("tabindex","0"),this.slideDeck.classList.add("dcf-slide-deck"),this.slideDeck.addEventListener("mouseover",function(){n.paused||n.pause()}.bind(this.slideDeck),!1);this.slideDeck.addEventListener("mouseout",function(){n.paused&&!n.userPaused&&n.play()}.bind(this.slideDeck),!1),this.slideDeck.addEventListener("keydown",function(t){var e=t.target;l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowDown"))||l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("keyC"))?(e=(e=e.querySelector(".dcf-visible"))&&e.querySelector("figure button"))&&(e.focus(),l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("keyC"))&&e.click(),t.preventDefault()):l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowLeft"))?(t.preventDefault(),n.showSlide("previous")):l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowRight"))&&(t.preventDefault(),n.showSlide("next"))},!1)},[{key:"pause",value:function(){this.paused=!0,clearInterval(this.scrollInterval)}},{key:"play",value:function(){this.paused=!1,this.scrollInterval=setInterval(this.scroll.bind(this),this.scrollRate)}},{key:"firstSlide",value:function(){return this.slides[l.DCFUtility.magicNumbers("int0")]}},{key:"lastSlide",value:function(){var t=this.slides.length>l.DCFUtility.magicNumbers("int1")?this.slides.length-l.DCFUtility.magicNumbers("int1"):l.DCFUtility.magicNumbers("int0");return this.slides[t]}},{key:"scroll",value:function(){var t=this.slideshow.querySelectorAll(".dcf-visible");t[l.DCFUtility.magicNumbers("int0")].nextElementSibling?this.showSlide("next"):(this.slideTransition&&(t=t[l.DCFUtility.magicNumbers("int0")],this.toggleSlideTransition(t,this.firstSlide())),this.scrollIt(this.firstSlide()))}},{key:"shuffleSlides",value:function(){var t,e,i=this.slides.length;for(l.DCFUtility.magicNumbers("int0");l.DCFUtility.magicNumbers("int0")!==i;)e=Math.floor(Math.random()*i),i-=l.DCFUtility.magicNumbers("int1"),t=this.slides[i].innerHTML,this.slides[i].innerHTML=this.slides[e].innerHTML,this.slides[e].innerHTML=t}},{key:"initTransitionPanel",value:function(){this.slideTransition&&(this.panel=document.createElement("div"),this.panel.classList.add("dcf-slideshow-transition-panel","dcf-invisible","dcf-absolute","dcf-vh-100%","dcf-vw-100%","dcf-overflow-hidden"),this.panel.setAttribute("aria-hidden","true"),this.panel.setAttribute("style","top: 0; left:0"),this.theme.slideToggleTransition(this.panel),this.slideshow.appendChild(this.panel))}},{key:"initControls",value:function(){var t,e=this,i=document.createElement("div");this.ctrlPrevBtn=document.createElement("button"),this.ctrlNextBtn=document.createElement("button"),this.allowPlay=this.slideshow.hasAttribute("data-play")&&("true"===this.slideshow.dataset.play.toLowerCase()||"auto"===this.slideshow.dataset.play.toLowerCase()),this.allowPlay&&(this.ctrlPlayToggleBtn=document.createElement("button"),this.ctrlPlayToggleBtn.classList.add("dcf-btn","dcf-btn-primary","dcf-btn-slide","dcf-btn-slide-prev"),this.theme.slidePlayToggleBtnClassList&&(t=this.ctrlPlayToggleBtn.classList).add.apply(t,s(this.theme.slidePlayToggleBtnClassList)),this.theme.slideBtnClassList&&(t=this.ctrlPlayToggleBtn.classList).add.apply(t,s(this.theme.slideBtnClassList)),this.theme.slidePlayBtnInnerHTML&&(this.ctrlPlayToggleBtn.innerHTML=this.theme.slidePlayBtnInnerHTML),this.ctrlPlayToggleBtn.setAttribute("aria-label","".concat(this.slideshowName," play toggle")),this.ctrlPlayToggleBtn.setAttribute("id",this.uuid.concat("-play-toggle")),this.ctrlPlayToggleBtn.addEventListener("click",function(){e.paused?(e.play(),e.userPaused=!1):(e.pause(),e.userPaused=!0),e.ctrlPlayToggleBtn.innerHTML=e.paused?e.theme.slidePlayBtnInnerHTML:e.theme.slidePauseBtnInnerHTML},!1),this.ctrlPlayToggleBtn.addEventListener("keydown",function(t){l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowUp"))&&(t.preventDefault(),e.slideDeck.focus())},!1)),i.classList.add("dcf-slideshow-controls","dcf-btn-group","dcf-absolute","dcf-right-0","dcf-z-1"),"false"===this.slideshow.getAttribute("data-toggle-caption")?i.classList.add("dcf-top-0"):i.classList.add("dcf-bottom-0"),i.setAttribute("aria-label","".concat(this.slideshowName," controls")),i.setAttribute("role","group"),this.ctrlPrevBtn.classList.add("dcf-btn","dcf-btn-primary","dcf-btn-slide","dcf-btn-slide-prev"),this.theme.slidePrevBtnClassList&&(t=this.ctrlPrevBtn.classList).add.apply(t,s(this.theme.slidePrevBtnClassList)),this.theme.slideBtnClassList&&(t=this.ctrlPrevBtn.classList).add.apply(t,s(this.theme.slideBtnClassList)),this.theme.slidePrevBtnInnerHTML&&(this.ctrlPrevBtn.innerHTML=this.theme.slidePrevBtnInnerHTML),this.ctrlPrevBtn.setAttribute("id",this.uuid.concat("-previous")),this.ctrlPrevBtn.setAttribute("aria-label","".concat(this.slideshowName," previous")),this.ctrlNextBtn.classList.add("dcf-btn","dcf-btn-primary","dcf-btn-slide","dcf-btn-slide-next"),this.theme.slideNextBtnClassList&&(t=this.ctrlNextBtn.classList).add.apply(t,s(this.theme.slideNextBtnClassList)),this.theme.slideBtnClassList&&(t=this.ctrlNextBtn.classList).add.apply(t,s(this.theme.slideBtnClassList)),this.theme.slideNextBtnInnerHTML&&(this.ctrlNextBtn.innerHTML=this.theme.slideNextBtnInnerHTML),this.ctrlNextBtn.setAttribute("id",this.uuid.concat("-next")),this.ctrlNextBtn.setAttribute("aria-label","".concat(this.slideshowName," next")),this.slideshow.classList.add("dcf-relative"),i.appendChild(this.ctrlPrevBtn),this.allowPlay&&i.appendChild(this.ctrlPlayToggleBtn),i.appendChild(this.ctrlNextBtn),this.slideshow.appendChild(i),this.allowPlay&&"auto"===this.slideshow.dataset.play.toLowerCase()&&this.ctrlPlayToggleBtn.click(),this.ctrlPrevBtn.addEventListener("click",function(){e.showSlide("previous")},!1),this.ctrlPrevBtn.addEventListener("keydown",function(t){l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowUp"))&&(t.preventDefault(),e.slideDeck.focus())},!1),this.ctrlNextBtn.addEventListener("click",function(){e.showSlide("next")},!1),this.ctrlNextBtn.addEventListener("keydown",function(t){l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowUp"))&&(t.preventDefault(),e.slideDeck.focus())},!1)}},{key:"initSlides",value:function(){var s=this;Array.prototype.forEach.call(this.slides,function(t,e){t.setAttribute("id",s.uuid.concat("-slide-",e)),t.classList.add("dcf-slide","dcf-relative");t=t.querySelector("figure");if(t){var i=t.querySelector("figcaption");if(void 0!==i&&"false"!==s.slideshow.getAttribute("data-toggle-caption")){i.setAttribute("id",s.uuid.concat("-caption-",e));e=new n.DCFFigcaptionToggleTheme;e.setThemeVariable("toggleButtonInnerHTML",s.theme.figureCaptionBtnInnerHTML),e.setThemeVariable("toggleButtonClassList",s.theme.figureCaptionBtnClassList),e.setThemeVariable("figcaptionClassList",s.theme.captionClassList);new n.DCFFigcaptionToggle(i,e,{offKeys:["arrowUp","tab"]}).initialize(),t.classList.add("dcf-slide-figure");i=t.querySelector(".dcf-btn-slide-caption");if(i.setAttribute("tabindex","-1"),null===i)throw new Error("Error Initializing Toggle Caption, Missing Button");s.captionBtnEvents(i)}}})}},{key:"slideObserverInit",value:function(){var e,i=this,t={root:this.slideshow,rootMargin:"-10px"};"IntersectionObserver"in window?(e=new IntersectionObserver(function(t){Array.prototype.forEach.call(t,function(t){var e;!t.intersectionRatio>l.DCFUtility.magicNumbers("int0")?t.target.classList.remove("dcf-visible"):((e=t.target.querySelector("img"))&&i.lazyLoadImage(e),t.target.classList.add("dcf-visible"))})},t),Array.prototype.forEach.call(this.slides,function(t){e.observe(t)})):Array.prototype.forEach.call(this.slides,function(t){var e=t.querySelector("img");e&&i.lazyLoadImage(e),t.classList.add("dcf-visible")})}},{key:"captionBtnEvents",value:function(t){var e=this;t.addEventListener("keydown",function(t){l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowDown"))?t.preventDefault():(l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowLeft"))||l.DCFUtility.isKeyEvent(t,l.DCFUtility.keyEvents("arrowRight")))&&e.slideDeck.focus()},!1)}},{key:"pxTOvw",value:function(t){var e=document.documentElement,i=document.getElementsByTagName("body")[0],e=window.innerWidth||e.clientWidth||i.clientWidth;return"".concat(100*t/e,"vw")}},{key:"lazyLoadImage",value:function(t){var e=t.dataset.src,i=t.dataset.srcset||null,s=null;e&&(s="PICTURE"===t.parentNode.nodeName?(this.applyPicture(t.parentNode),t.dataset.sizes||this.pxTOvw(t.parentNode.parentElement.clientWidth)):t.dataset.sizes||this.pxTOvw(t.parentElement.clientWidth),t.classList.add("dcf-lazy-loaded"),t.classList.remove("dcf-lazy-load"),e&&(t.src=e,t.removeAttribute("data-src")),i&&(t.srcset=i,t.removeAttribute("data-srcset")),s)&&(t.sizes=s,t.removeAttribute("data-sizes"))}},{key:"transitionPromise",value:function(e,i){var s=this;return new Promise(function(t){s.panel.innerHTML=e.innerHTML,s.panel.classList.remove("dcf-invisible"),s.scrollIt(i),s.panel.dispatchEvent(s.source.hideSlideEvent),i.dispatchEvent(s.source.showSlideEvent),setTimeout(function(){t()},s.source.theme.slideToggleTransitionDuration)}).then(function(){s.panel.innerHTML="",s.panel.classList.add("dcf-invisible")})}},{key:"toggleSlideTransition",value:function(t,e){this.transitionPromise(t,e)}},{key:"scrollIt",value:function(t){t=Array.prototype.indexOf.call(this.slides,t)*(this.slideDeck.scrollWidth/this.slides.length);this.slideDeck.scrollLeft=t}},{key:"showSlide",value:function(t){var e=this.slideshow.querySelectorAll(".dcf-visible"),t="previous"===t?l.DCFUtility.magicNumbers("int0"):l.DCFUtility.magicNumbers("int1");e.length>l.DCFUtility.magicNumbers("int1")?this.scrollIt(e[t]):(t=t===l.DCFUtility.magicNumbers("int0")?e[l.DCFUtility.magicNumbers("int0")].previousElementSibling:e[l.DCFUtility.magicNumbers("int0")].nextElementSibling)&&(this.slideTransition?(e=e[l.DCFUtility.magicNumbers("int0")],this.toggleSlideTransition(e,t)):this.scrollIt(t))}}])}(),h=t.DCFSlideshowTheme=function(){return e(function t(){c(this,t),this.slideBtnClassList=["dcf-d-flex","dcf-ai-center","dcf-pt-4","dcf-pb-4","dcf-white"],this.slidePrevBtnClassList=["dcf-d-flex","dcf-ai-center","dcf-pt-4","dcf-pb-4","dcf-inverse"],this.slidePrevBtnInnerHTML='<svg class="dcf-h-4 dcf-w-4 dcf-fill-current" width="24"\nheight="24" viewBox="0 0 24 24" focusable="false" aria-hidden="true">\n    <path d="M23.509\n    9.856c-.38-.55-.928-.852-1.542-.852H9.74l4.311-4.151c.995-.994.961-2.646-.074-3.682-1.001-1-2.722-1.033-3.68-.077L.148\n    11.144a.5.5 0 00-.003.707l9.978 10.079a2.445 2.445 0 001.737.705c.707 0 1.407-.294 1.92-.806a2.737 2.737 0 00.807-1.923\n    2.431 2.431 0\n    00-.708-1.733l-4.156-4.16h12.276c.618 0 1.161-.302 1.53-.851.304-.451.471-1.041.471-1.658 0-.596-.179-1.196-.491-1.648z"></path>\n</svg>',this.slideNextBtnClassList=["dcf-d-flex","dcf-ai-center","dcf-pt-4","dcf-pb-4","dcf-inverse"],this.slideNextBtnInnerHTML='<svg class="dcf-h-4 dcf-w-4 dcf-fill-current" width="24"\nheight="24" viewBox="0 0 24 24" focusable="false" aria-hidden="true">\n    <path d="M23.852 11.144L13.703 1.096c-.96-.96-2.678-.924-3.68.075-1.036 1.035-1.07 2.687-.069 3.69l4.321\n    4.143H2.03c-1.27 0-2.03 1.272-2.03 2.5 0 .617.168 1.207.472 1.659.369.549.913.851 1.53.851h12.276l-4.156 4.16a2.425\n    2.425 0 00-.708 1.734c0 .708.293 1.409.807 1.922a2.738 2.738 0 001.919.806c.664 0 1.28-.251\n    1.739-.708l9.977-10.076a.502.502 0 00-.004-.708z"></path>\n</svg>',this.slidePlayToggleBtnClassList=["dcf-d-flex","dcf-ai-center","dcf-pt-4","dcf-pb-4","dcf-inverse"],this.slidePlayBtnInnerHTML='<svg class="dcf-h-4 dcf-w-4 dcf-fill-current" width="24"\nheight="24" viewBox="0 0 24 24" focusable="false" aria-hidden="true">\n    <path d="M21.759 11.577L2.786.077a.499.499 0 0 0-.759.428v23a.498.498\n      0 0 0 .5.5c.09 0 .18-.024.259-.072l18.973-11.5a.5.5 0 0 0 0-.856z"></path>\n</svg>',this.slidePauseBtnInnerHTML='<svg class="dcf-h-4 dcf-w-4 dcf-fill-current" width="24" height="24"\nviewBox="0 0 24 24" focusable="false" aria-hidden="true">\n    <path d="M10.5 0h-5C5.224 0 5 .224 5 .5v23C5 23.776 5.224 24 5.5 24h5c.276 0 .5-.224.5-.5v-23C11 .224 10.776 0 10.5\n    0zM18.5 0h-5C13.224 0 13 .224 13 .5v23c0 .276.224.5.5.5h5c.276 0 .5-.224.5-.5v-23C19 .224 18.776 0 18.5 0z"></path>\n</svg>',this.captionClassList=["dcf-absolute","dcf-left-0","dcf-top-0","dcf-h-100%","dcf-w-100%","dcf-z-1","dcf-slide-caption"],this.figureCaptionBtnClassList=["dcf-btn","dcf-btn-inverse-tertiary","dcf-absolute","dcf-z-1","dcf-d-flex","dcf-ai-center","dcf-pt-4","dcf-pb-4","dcf-white","dcf-btn-slide","dcf-btn-slide-caption"],this.figureCaptionBtnInnerHTML='<svg class="dcf-h-4 dcf-w-4 dcf-fill-current"\n        width="24" height="24" viewBox="0 0 24 24" focusable="false" aria-hidden="true">\n      <path class="theme-icon-slide-caption-open"\n        d="M1,3h19c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1C0.4,1,0,1.4,0,2C0,2.6,0.4,3,1,3z"/>\n        \'<path class="theme-icon-slide-caption-open"\n        d="M1,8h15c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1C0.4,6,0,6.4,0,7C0,7.6,0.4,8,1,8z"/>\n      <path class="theme-icon-slide-caption-close-1"\n        d="M1,13h22c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1c-0.6,0-1,0.4-1,1C0,12.6,0.4,13,1,13z"/>\n      <path class="theme-icon-slide-caption-close-2"\n        d="M1,13h22c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1c-0.6,0-1,0.4-1,1C0,12.6,0.4,13,1,13z"/>\n      <path class="theme-icon-slide-caption-open"\n        d="M1,18h18c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1c-0.6,0-1,0.4-1,1C0,17.6,0.4,18,1,18z"/>\n      <path class="theme-icon-slide-caption-open"\n        d="M1,23h15c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H1c-0.6,0-1,0.4-1,1C0,22.6,0.4,23,1,23z"/>\n      </svg>'},[{key:"setThemeVariable",value:function(t,e){t in this&&a(e)==a(this[t])&&(this[t]=e)}}])}();t.DCFSlideshow=function(){return e(function t(e,i){c(this,t),this.slideshows=e,i instanceof h?this.theme=i:this.theme=new h},[{key:"initialize",value:function(){var i=this;Array.prototype.forEach.call(this.slideshows,function(t,e){t=new d(t,e,i);t instanceof d&&(t.initTransitionPanel(),t.initControls(),t.slides=t.slideDeck.querySelectorAll("li"),t.slideshow.hasAttribute("data-shuffle")&&"true"===t.slideshow.dataset.shuffle.toLowerCase()&&t.shuffleSlides(),t.slideObserverInit(),t.initSlides())})}}],[{key:"events",value:function(t){var e={};return Object.freeze(e),void 0!==n.DCFFigcaptionToggle.events(t)?n.DCFFigcaptionToggle.events(t):t in e?e[t]:void 0}}])}()});