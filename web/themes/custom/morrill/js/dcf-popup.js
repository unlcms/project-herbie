define(["exports","./dcf-utility","./dcf-button-toggle"],function(t,o,a){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=i(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:t+""}(n.key),n)}}function e(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.DCFPopupTheme=t.DCFPopup=void 0;var c=t.DCFPopupTheme=function(){return e(function t(){n(this,t),this.popupClassList=["dcf-relative"],this.popupButtonClassList=[],this.popupContentClassList=["dcf-absolute","dcf-z-modal-fullscreen"],this.hoverTimeoutDuration=250},[{key:"setThemeVariable",value:function(t,e){t in this&&i(e)==i(this[t])&&(this[t]=e)}}])}();t.DCFPopup=function(){function p(t,e){n(this,p),e instanceof c?this.theme=e:this.theme=new c,this.popupOpenEvent=new Event(p.events("popupOpen")),this.commandOpen=new Event(a.DCFToggleButton.events("commandOpen")),this.commandClose=new Event(a.DCFToggleButton.events("commandClose")),this.commandToggle=new Event(a.DCFToggleButton.events("commandToggle")),this.positions=["top","bottom","left","right"],this.alignments=["start","center","end"],this.uuid=o.DCFUtility.uuidv4(),this.popups=t,NodeList.prototype.isPrototypeOf(this.popups)?this.popups=Array.from(this.popups):Array.isArray(this.popups)||(this.popups=[this.popups])}return e(p,[{key:"initialize",value:function(){var s=this;this.popups.forEach(function(n,t){s.theme.popupClassList&&s.theme.popupClassList.forEach(function(t){n.classList.add(t)});var i=n.querySelector(":scope > .dcf-btn-toggle-popup, :scope > .dcf-btn-popup");if(null===i||"BUTTON"!==i.tagName)throw new Error("Popup Button Is Missing Or Not A Button Tag");var e=n.querySelector(":scope > .dcf-popup-content");if(null===e)throw new Error("Popup Content Is Missing");var o=n.querySelectorAll(":scope > .dcf-popup-content > .dcf-btn-close-popup, :scope > .dcf-popup-content > .dcf-btn-popup-close"+', :scope > .dcf-popup-content .dcf-btn-close-popup[data-for="'.concat(n.id,'"]')+', :scope > .dcf-popup-content .dcf-btn-popup-close[data-for="'.concat(n.id,'"]'));o.forEach(function(t){if(null!==t&&"BUTTON"!==t.tagName)throw new Error("Close Button is Not a Button Tag")}),""===n.id&&(n.id=s.uuid.concat("-popup-".concat(t))),""===i.id&&(i.id=s.uuid.concat("-popup-btn-".concat(t))),""===e.id&&(e.id=s.uuid.concat("-popup-content-".concat(t))),s.theme.popupButtonClassList&&s.theme.popupButtonClassList.forEach(function(t){i.classList.add(t)}),s.theme.popupContentClassList&&s.theme.popupContentClassList.forEach(function(t){e.classList.add(t)}),i.dataset.controls=e.id,i.dataset.startExpanded="false",s.addPositionClasses(n,e),new a.DCFToggleButton(i).initialize(),o.forEach(function(t){t.addEventListener("click",function(){i.dispatchEvent(s.commandClose)})}),e.addEventListener(a.DCFToggleButton.events("toggleElementOn"),function(){n.dispatchEvent(s.popupOpenEvent)}),document.addEventListener(p.events("popupOpen"),function(e){var o=!1;n.querySelectorAll(".dcf-popup").forEach(function(t){t.id===e.target.id&&(o=!0)}),o||e.target.id===n.id||i.dispatchEvent(s.commandClose)},!0),document.body.addEventListener("click",function(t){n.contains(t.target)||i.dispatchEvent(s.commandClose)},!0),"true"===n.dataset.hover&&(n.addEventListener("mouseleave",function(){n.dataset.hoverTimeout=setTimeout(function(){n.removeAttribute("data-hover-timeout"),i.dispatchEvent(s.commandClose)},s.theme.hoverTimeoutDuration)}),n.addEventListener("mouseenter",function(){clearTimeout(n.dataset.hoverTimeout),n.removeAttribute("data-hover-timeout"),i.dispatchEvent(s.commandOpen)})),null!==n.getAttribute("hidden")&&n.removeAttribute("hidden")})}},{key:"addPositionClasses",value:function(t,e){var o=t.dataset.position;if(void 0===o)o="bottom";else if(!this.positions.includes(o))throw new Error("Invalid Position On Popup");t=t.dataset.alignment;if(void 0===t)t="center";else if(!this.alignments.includes(t))throw new Error("Invalid Alignment On Popup");"top"===o?e.classList.add("dcf-bottom-100%"):"bottom"===o?e.classList.add("dcf-top-100%"):"left"===o?e.classList.add("dcf-right-100%"):"right"===o&&e.classList.add("dcf-left-100%"),"top"===o||"bottom"===o?"start"===t?e.classList.add("dcf-left-0"):"end"===t?e.classList.add("dcf-right-0"):"center"===t&&e.classList.add("dcf-left-50%"):"left"!==o&&"right"!==o||("start"===t?e.classList.add("dcf-top-0"):"end"===t?e.classList.add("dcf-bottom-0"):"center"===t&&e.classList.add("dcf-top-50%"))}}],[{key:"events",value:function(t){var e={popupOpen:"popupOpen"};return Object.freeze(e),void 0!==a.DCFToggleButton.events(t)?a.DCFToggleButton.events(t):t in e?e[t]:void 0}}])}()});